<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Micky CBT Platform</title>

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">

<!-- Theme Color -->
<meta name="theme-color" content="#0f172a">

<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ================= HOME SECTION ================= -->

<div id="homeSection" class="section">

  <h1>JAMB CBT Practice</h1>
  <h2>by Micky Fundz</h2>

  <div class="grid">

    <div class="card" onclick="openSubject('maths')">
      <img src="images/maths.png">
      <h3>Mathematics</h3>
    </div>

    <div class="card" onclick="openSubject('physics')">
      <img src="images/physics.png">
      <h3>Physics</h3>
    </div>

    <div class="card" onclick="openSubject('chemistry')">
      <img src="images/chemistry.png">
      <h3>Chemistry</h3>
    </div>

    <div class="card" onclick="openSubject('biology')">
      <img src="images/biology.png">
      <h3>Biology</h3>
    </div>

    <div class="card" onclick="openCBTSelection()">
      <img src="images/cbt.png">
      <h3>CBT Mode</h3>
    </div>

    <div class="card" onclick="openAbout()">
      <img src="images/about.png">
      <h3>About</h3>
    </div>

  </div>

  <br>
  <button onclick="installApp()">Install App</button>

</div>

<!-- ================= ABOUT SECTION ================= -->

<div id="aboutSection" class="section hidden">
  <div class="top-bar">
    <h2>About Micky CBT Platform</h2>
    <button onclick="goHome()">Back</button>
  </div>

  <div id="questionBox">
    <p class="question-text">
      Micky CBT Platform is a professional JAMB CBT system
      built to help students practice effectively.
    </p>
  </div>
</div>

<!-- ================= SUBJECT SELECTION ================= -->

<div id="subjectSelectSection" class="section hidden">
  <h2>Select Subjects</h2>

  <label><input type="checkbox" id="maths"> Mathematics</label><br>
  <label><input type="checkbox" id="physics"> Physics</label><br>
  <label><input type="checkbox" id="chemistry"> Chemistry</label><br>
  <label><input type="checkbox" id="biology"> Biology</label><br><br>

  <button onclick="startCBT()">Start Exam</button>
  <button onclick="goHome()">Back</button>
</div>

<!-- ================= EXAM SECTION ================= -->

<div id="examSection" class="section hidden">

  <div class="top-bar">
    <div id="subjectIndicator"></div>

    <div class="exam-controls">
      <div id="timer"></div>
      <button class="calc-btn" onclick="toggleCalculator()">Calculator</button>
    </div>
  </div>

  <div id="questionBox">
    <div class="question-text" id="questionText"></div>
    <div id="optionsContainer"></div>
  </div>

  <br>
  <button onclick="prevQuestion()">Previous</button>
  <button onclick="nextQuestion()">Next</button>
</div>

<!-- ================= RESULT SECTION ================= -->

<div id="resultSection" class="section hidden"></div>

<!-- ================= CALCULATOR ================= -->

<div id="calculator" class="calculator hidden">

  <div class="calc-header">
    Calculator
    <button class="close-btn" onclick="toggleCalculator()">X</button>
  </div>

  <div class="calc-screen" id="calcScreen">0</div>

  <div class="calc-grid">
    <button onclick="appendCalc('7')">7</button>
    <button onclick="appendCalc('8')">8</button>
    <button onclick="appendCalc('9')">9</button>
    <button onclick="appendCalc('/')">÷</button>

    <button onclick="appendCalc('4')">4</button>
    <button onclick="appendCalc('5')">5</button>
    <button onclick="appendCalc('6')">6</button>
    <button onclick="appendCalc('*')">×</button>

    <button onclick="appendCalc('1')">1</button>
    <button onclick="appendCalc('2')">2</button>
    <button onclick="appendCalc('3')">3</button>
    <button onclick="appendCalc('-')">−</button>

    <button onclick="appendCalc('0')">0</button>
    <button onclick="appendCalc('.')">.</button>
    <button onclick="appendCalc('+')">+</button>

    <button onclick="clearCalc()">C</button>
    <button onclick="calculateResult()">=</button>
  </div>

</div>

<script src="script.js"></script>

<!-- ================= PWA INSTALL LOGIC ================= -->

<script>
let deferredPrompt;

window.addEventListener("beforeinstallprompt", (e) => {
  e.preventDefault();
  deferredPrompt = e;
  console.log("Install ready");
});

function installApp(){
  if(deferredPrompt){
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then(() => {
      deferredPrompt = null;
    });
  }
}

// Register Service Worker
if ("serviceWorker" in navigator) {
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("servicework.js")
      .then(() => console.log("Service Worker Registered"))
      .catch(err => console.log("SW Error:", err));
  });
}
</script>

</body>
</html>